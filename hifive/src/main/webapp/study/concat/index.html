<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<script src="../../lib/jquery/jquery.js"></script>
<title>test</title>
<script>
	$(function() {
		var replace = function(str, var_args) {
			var args = arguments;
			return str.replace(/\{(\d+)\}/g, function(m, c) {
				return args[parseInt(c, 10) + 1];
			});
		};

		var count = 100000;
		var str = "";
		var letters = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];

		for ( var i = 0; i < 10; i++) {
			str += "{" + i + "}, ";
		}

		var param = [str].concat(letters);

		showResult(count + "回 実行");

		// replace
		var start = new Date();
		for (x = 0; x < count; x++) {
			replace.apply(null, param);
		}
		var end = new Date();
		showResult("replace(): " + (end - start) + "ms");

		// Array.join()
		var start2 = new Date();
		for (x = 0; x < count; x++) {
			var ar2 = [];
			for ( var j = 0; j < 10; j++) {
				ar2.push(letters[j])
			}
			ar2.join(', ');
		}
		var end2 = new Date();
		showResult("Array.join(): " + (end2 - start2) + "ms");

		// +=
		var start3 = new Date();
		for (x = 0; x < count; x++) {
			var str2 = "";
			for ( var k = 0; k < 10; k++) {
				str2 += (letters[k] + ', ');
			}
		}
		var end3 = new Date();
		showResult("+=: " + (end3 - start3) + "ms");
	});

	function showResult(str) {
		$('<div></div>').appendTo('#result').text(str);
	}
</script>
</head>
<body>
	<div>
		文字を連結して、『a, b, c, d, e, f, g, h, i, j』 という文字列を生成する。
	</div>
	<h4>実行結果</h4>
	<div id="result"></div>
</body>
</html>