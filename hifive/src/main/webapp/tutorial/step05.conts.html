<!-- CONTENTS_CSS_BEGIN -->
<link rel="stylesheet" href="css/article.css" type="text/css" />
<link type="text/css" rel="stylesheet"
	href="../lib/syntaxhighlighter/styles/SyntaxHighlighter.css"></link>
<!-- CONTENTS_CSS_END -->
<!-- CONTENTS_SCRIPT_BEGIN -->
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript">
	window.onload = function() {
		dp.SyntaxHighlighter.ClipboardSwf = '../lib/syntaxhighlighter/scripts/clipboard.swf';
		dp.SyntaxHighlighter.HighlightAll('code');
	}
</script>
<!-- CONTENTS_SCRIPT_END -->
<!-- CONTENTS_MAIN_BEGIN -->
<div id="contents">
	<ul class="menu tutorialIndex">
		<li><a href="step01.html" title="01.準備">01.準備</a></li>
		<li><a href="step02.html" title="02.MVC構造">02.MVC構造</a></li>
		<li><a href="step03.html" title="03.HelloWorld">03.HelloWorld</a></li>
		<li><a href="step04.html" title="04.コントローラ">04.コントローラ</a></li>
		<li><a href="step05.html" title="05.ビュー操作">05.ビュー操作</a></li>
		<li><a href="step06.html" title="06.ロジック">06.ロジック</a></li>
		<li><a href="step07.html" title="07.非同期処理">07.非同期処理</a></li>
		<li><a href="step08.html" title="08.テスト">08.テスト</a></li>
		<li><a href="step09.html" title="09.ドキュメント記述・生成(JSDoc)">09.ドキュメント記述・生成(JSDoc)</a></li>
		<li><a href="step10.html" title="10.サンプルアプリ（動画検索アプリの作成）">10.サンプルアプリ（動画検索アプリの作成）</a></li>
		<li><a href="step11.html" title="11.スマートフォン対応（jQueryMobileとの連携）">11.スマートフォン対応（jQueryMobileとの連携）</a></li>
		<li><a href="step12.html" title="12.HTML5APIの利用">12.HTML5APIの利用</a></li>
        <li><a href="step13.html" title="13.AOP(アスペクトの適用)">13.AOP(アスペクトの適用)</a></li>
	</ul>
	<h1 class="title">チュートリアル05.ビュー操作</h1>
	<div class="contents contents2">
		<input type="hidden" name="contents2Level" value="0"><input
			type="hidden" name="contents2Filter" value=""><input
			type="hidden" name="contents2Count" value="-1"><input
			type="hidden" name="contents2CountLevel" value="0">
		<ul class="list1">
			<li><a href="#capture022535">概要 </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture122535">単一要素の操作 </a></li>
			<ul class="list2">
				<li><a href="#capture222535"> 操作例 </a></li>
			</ul>
		</ul>
		<ul class="list1">
			<li><a href="#capture322535">複雑なビューの生成（テンプレートの使用） </a></li>
			<ul class="list2">
				<li><a href="#capture422535">基本構文 </a></li>
				<li><a href="#capture522535">テンプレートの定義場所 </a></li>
				<li><a href="#capture622535">テンプレートファイルのロード </a></li>
				<li><a href="#capture722535">データオブジェクトの受け渡し </a></li>
				<li><a href="#capture822535">テンプレートの使用 </a></li>
			</ul>
		</ul>
		<ul class="list1">
			<li><a href="#capture922535"> 実装例 </a></li>
			<ul class="list2">
				<li><a href="#capture1022535">テンプレートへ値を渡す(バインドする)方法 </a></li>
				<li><a href="#capture1122535"> 動作確認 </a></li>
			</ul>
		</ul>
		<ul class="list1">
			<li><a href="#capture1222535"> テンプレートの複数記述 </a></li>
			<ul class="list2">
				<li><a href="#capture1322535">同じテンプレートIDを持つテンプレートが読み込まれたときの挙動
				</a></li>
			</ul>
		</ul>
		<ul class="list1">
			<li><a href="#capture1422535"> ビュー操作に関する注意（idの一意性） </a></li>
		</ul>
	</div>
	<a class="anchor_super" id="capture022535"></a><h2>
		概要
	</h2>
	<p>
		JavaScriptでは処理のどこからでもビュー操作（画面操作、DOM操作 とも言います）を行うことができます。<br>これは柔軟に機能を記述できる反面、どこでどんな処理をしているかがわかりにくくなったり、<br>思わぬところで画面処理を行っていて保守が大変・ちょっとした画面の変更がやりにくい、などの原因にもなります。
	</p>
	<p>
		そこで、hifiveでは「<span class="strong">ビュー操作は原則としてコントローラ内にのみ記述すること</span>」と定めています。<br>これを守ることで「ビュー操作を行っているのは必ずコントローラである」ことが明らかになり、<br>保守・引継時にどこに手を付ければよいかがわかりやすくなります。
	</p>
	<p>
		また、hifiveでは、ビュー生成のために<a href="http://embeddedjs.com/" rel="nofollow">EJS</a>というテンプレートエンジンを導入しています。<br>目的とする画面（機能）を作成するためには通常様々なタグを組み合わせる必要がありますが、<br>テンプレートエンジンを利用することで、複雑な構造を持つタグを視覚的に編集することができます。<br>これも、保守性や可読性の向上に大きく寄与しています。
	</p>
	<a class="anchor_super" id="capture122535"></a><h2>
		単一要素の操作
	</h2>
	<p>
		&lt;input&gt;タグにセットされた値を読み取りたい・&lt;div&gt;タグの中に文字列を流し込みたい、など、<br>
		<span class="strong">単一の要素の読み書きを行いたい場合</span>はjQueryを使用します。
	</p>
	<p>
		ただし、DOM要素を選択するとき、jQueryの「$()」をそのまま使用するのではなく、コントローラ内で使える<br> <span
			class="strong">this.$find()</span>メソッドを使用してください。<br>このメソッドはコントローラがバインドされた要素配下から要素を検索するので、<br>コントローラ（がバインドされた要素）の範囲外の要素を誤って操作することを防ぎます。
	</p>
	<a class="anchor_super" id="capture222535"></a><h3>
		操作例
	</h3>
	<p>
		※<span class="strong">this.$find()</span>の戻り値は「セレクタで指定された要素が選択された状態のjQueryオブジェクト」なので、<br>選択した後は通常のjQueryと同様に要素を操作することができます。
	</p>
	<table class="style_table" cellspacing="1" border="0">
		<thead>
			<tr>
				<td class="style_td" style="">操作内容</td>
				<td class="style_td" style="">実装方法</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="style_td" style="">要素生成</td>
				<td class="style_td" style="">$(タグ)</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">要素選択</td>
				<td class="style_td" style="background-color: white;">this.$find(セレクタ);</td>
			</tr>
			<tr>
				<td class="style_td" style="">要素削除</td>
				<td class="style_td" style="">this.$find(セレクタ).remove();</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">要素の内容の更新</td>
				<td class="style_td" style="background-color: white;">this.$find(セレクタ).html(element);<br
					class="spacer">this.$find(セレクタ).text(value);<br class="spacer">this.$find(セレクタ).val(value);
				</td>
			</tr>
		</tbody>
	</table>
	<p>
		<span style="color: red; background-color:">※thisはコントローラ自身を指します。</span>
	</p>
	<a class="anchor_super" id="capture322535"></a><h2>
		複雑なビューの生成（テンプレートの使用）
	</h2>
	<a class="anchor_super" id="capture422535"></a><h3>
		基本構文
	</h3>
	<p>
		複数のタグで構成される複雑なビューを作成する場合は、ビューテンプレートを使用します。<br>1つのテンプレートは<span
			class="strong">&lt;script type="text/ejs"&gt;&lt;/script&gt;</span>で囲んだ中に記述します。<br>各テンプレートには一意なIDをつける必要があります（&lt;script&gt;タグのid属性としてセットします）。
	</p>
	<p>
		EJSの構文は、JSPに非常によく似ています。<br>JavaScriptコードの開始は<span class="strong">[%</span>で、終了は<span
			class="strong">%]</span>で表します。<span class="strong">[% %]</span>は任意の場所に書くことができます。<br>中にはJavaScriptコードを記述することができるので、forループやif分岐などを使用して表示をカスタマイズできます。
	</p>
	<p>
		<span class="strong">テンプレート記述例：</span>
	</p>
	<pre name="code" class="xml">&lt;script type="text/ejs" id="list"&gt;
&nbsp;&nbsp;[% for (var i = 1, len = num + 1; i &lt; len; i++) { %]
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span style="[%= 'color: ' + (i % 2 === 0 ? 'blue;': 'red;') %]"&gt;[%= i %]&lt;/span&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;
&nbsp;&nbsp;[% } %]
&lt;/script&gt;</pre>
	<a class="anchor_super" id="capture522535"></a><h3>
		テンプレートの定義場所
	</h3>
	<p>テンプレートは以下の2箇所で定義できます。</p>
	<ol class="list1" style="padding-left: 12px; margin-left: 12px">
		<li><span class="strong">独立したファイルに記述</span></li>
		<li><span class="strong">HTML内に直接記述</span></li>
	</ol>
	<p>基本的には独立したファイルに記述することをお勧めしますが、</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>そのテンプレートを特定の画面（HTML）でしか使用しない</li>
		<li>HTTPリクエストの回数を最小限にしたい
			<ul class="list2" style="padding-left: 12px; margin-left: 12px">
				<li>独立したファイルにした場合ファイルごとにHTTPリクエストが発生します</li>
			</ul>
		</li>
	</ul>
	<p>などの場合には、HTML内に直接記述する方式を検討するのもよいでしょう。</p>
	<p>
		なお、テンプレートを独立したファイルにする場合、拡張子は「<span class="strong">.ejs</span>」にすることをお勧めします。
	</p>
	<a class="anchor_super" id="capture622535"></a><h3>
		テンプレートファイルのロード
	</h3>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>テンプレートを外部ファイルとして定義した場合、それを使用するコントローラの<span class="strong">__templates</span>プロパティで<br>テンプレートファイルのURLを書いておくと、コントローラ化を行うときに自動的に読み込まれます。<br>コントローラは指定されたテンプレートファイルが読み込まれた後に動作を開始するので、<br>
			<span class="strong">イベントハンドラなどでテンプレートを使用するときには必ず利用可能</span>です。
			<ul class="list2" style="padding-left: 12px; margin-left: 12px">
				<li><a href="step04.html#capture925484">チュートリアル04.コントローラ &gt;「内部使用コントローラ・ロジック・ビューテンプレートの宣言</a>」も参照してください。</li>
			</ul></li>
		<li>HTMLに直接記述した場合は、いつでも使用することができます（__templatesプロパティを書く必要はありません）。</li>
	</ul>
	<a class="anchor_super" id="capture722535"></a><h3>
		データオブジェクトの受け渡し
	</h3>
	<p>テンプレートに対して、データオブジェクトを渡すことができます。</p>
	<a class="anchor_super" id="capture822535"></a><h3>
		テンプレートの使用
	</h3>
	<p>
		テンプレートを使用し画面に反映させるときは、コントローラ内でthis.view以下の次のようなメソッドを使用します。※thisはコントローラ自身を指します。<br>（下記のメソッドはコントローラ内で使用可能です。）
	</p>
	<table class="style_table" cellspacing="1" border="0">
		<thead>
			<tr>
				<td class="style_td" style="">メソッド名</td>
				<td class="style_td" style="">説明</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="style_td" style="">update(対象要素のオブジェクトまたはセレクタ,
					テンプレートID, パラメータ)</td>
				<td class="style_td" style="">対象要素の中身を、指定されたテンプレートで更新する。</td>
			</tr>
			<tr>
				<td class="style_td" style="">append(対象要素のオブジェクトまたはセレクタ,
					テンプレートID, パラメータ)</td>
				<td class="style_td" style="">対象要素の末尾に、指定されたテンプレートを挿入する。</td>
			</tr>
			<tr>
				<td class="style_td" style="">prepend(対象要素のオブジェクトまたはセレクタ,
					テンプレートID, パラメータ)</td>
				<td class="style_td" style="">対象要素の先頭に、指定されたテンプレートを挿入する。</td>
			</tr>
		</tbody>
	</table>
	<p>
		直接画面に反映させずテンプレートを適用したタグ文字列を（コードで）受け取りたい場合は、<br> <span
			class="strong">this.view.get(テンプレートID, 置換パラメータ)</span>を使用してください。
	</p>
	<a class="anchor_super" id="capture922535"></a><h2>
		実装例
	</h2>
	<ol class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>HTMLを用意します。<pre name="code" class="xml">&lt;!doctype html&gt;
&lt;html&gt;
&nbsp;&nbsp;&lt;head&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset="UTF-8"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="jquery.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="jquery.blockUI.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="ejs-1.0.h5mod.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="h5.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- ここで作成したjsファイルを読み込む --&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="step5.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;hifive ビュー操作&lt;/title&gt;
&nbsp;&nbsp;&lt;/head&gt;
&nbsp;&nbsp;&lt;body&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="container"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1から入力した数値までを奇数は&lt;span style="color: red;"&gt;赤色&lt;/span&gt;で、
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;偶数は&lt;span style="color: blue;"&gt;青色&lt;/span&gt;で画面に出力します。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="text" id="to" value="" /&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="button" id="output" value="出力" /&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul id="list"&gt;&lt;/ul&gt; &lt;!-- ここにテンプレート出力が流し込まれる --&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;
&nbsp;&nbsp;&lt;/body&gt;
&lt;/html&gt;</pre>
			<div class="spacer">&nbsp;</div>
		</li>
		<li>list.ejsというファイルを作成します。<pre name="code" class="xml">&lt;script type="text/ejs" id="list"&gt;
[% for (var i = 1, len = num + 1; i &lt; len; i++) { %]
&lt;li&gt;
&nbsp;&nbsp;&lt;span style="[%= 'color: ' + (i % 2 === 0 ? 'blue;': 'red;') %]"&gt;[%= i %]&lt;/span&gt;
&lt;/li&gt;
[% } %]
&lt;/script&gt;</pre>
			<div class="spacer">&nbsp;</div> &lt;script&gt;タグのidで指定した「<span
			class="strong">list</span>」が、this.view.get()で呼び出すときに必要な<span
			class="strong">テンプレートID</span>となります。
			<div class="spacer">&nbsp;</div>
		</li>
		<li>step3.jsというファイルを作成します。<pre name="code" class="js">$(function() {
&nbsp;&nbsp;// コントローラの元となるオブジェクトを作成
&nbsp;&nbsp;var controller = {
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;// コントローラ名を設定
&nbsp;&nbsp;&nbsp;&nbsp;__name: 'NumListController',
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;// 使用するテンプレートのパスを書く
&nbsp;&nbsp;&nbsp;&nbsp;__templates: 'list.ejs',&nbsp; // 複数ejsファイルを呼び出す場合は、配列で指定してください。
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;// id=outputが押された時のイベントハンドラ
&nbsp;&nbsp;&nbsp;&nbsp;'#output click': function() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 入力値を取得
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var to = this.$find('#to').val();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//値がなければ処理を終了
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!to) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// StringからNumberへ変換。変換に失敗したら終了
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to = parseInt(to);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch(e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 値をバインドしたテンプレートを画面に出力する
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.view.append('#list', 'list', {num: to});
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;};
&nbsp;&nbsp;
&nbsp;&nbsp;// id="container"である要素にコントローラをバインド
&nbsp;&nbsp;h5.core.controller('#container', controller);
});</pre>
			<div class="spacer">&nbsp;</div>
		</li>
		<li>HTMLをブラウザで表示させます。</li>
		<li>テキストボックスに数値を入力し<span class="strong">出力</span>ボタンをクリックします。
		</li>
	</ol>
	<a class="anchor_super" id="capture1022535"></a><h3>
		テンプレートへ値を渡す(バインドする)方法
	</h3>
	<p>
		hifiveが提供するテンプレートはJSPと同じように、テンプレートの<span class="strong">[% %]</span>または<span
			class="strong">[%= %]</span>の位置に任意の値を設定することができます。<span class="strong">[%=
			%]</span>内の文字列は自動でHTMLエスケープされます。<span class="strong">[%:= %]</span>と書くとエスケープされません。<br>
	</p>
	<p>テンプレートへ渡す値は、以下のように指定します。</p>
	<pre>{テンプレートで使用する変数名: 変数が保持する値}</pre>
	<p>
		<span class="strong">使用例:</span>
	</p>
	<pre name="code" class="js">this.view.append('#container', 'templateId1', {ar: [10, 20, 30]});</pre>
	<p>また、複数の値を渡したい場合の記述方法は、オブジェクトリテラルと同じく、</p>
	<pre>{テンプレートで使用する変数名: 変数が保持する値, テンプレートで使用する変数名: 変数が保持する値, ...}</pre>
	<p>上記のようにカンマ区切りで指定します。</p>
	<p>
		<span class="strong">使用例:</span>
	</p>
	<pre name="code" class="js">this.view.append('#container', 'templateId1', {ar: [10, 20, 30], str:'Hello World!'});</pre>
	<p>実装例では、step3.js の27行目、</p>
	<pre name="code" class="js">this.view.append('#list', 'list', {num: to});</pre>
	<p>
		の第3引数<span class="strong">{num: to}</span>でテンプレートへ値を渡しており、渡した値は
		list.ejs の2行目
	</p>
	<pre name="code" class="js">[% for (var i = 1, len = num + 1; i &lt; len; i++) { %]</pre>
	<p>
		の<span class="strong">num</span>で使用しています。<br>
	</p>
	<p>このように、オブジェクトのキー名をテンプレートで使用する変数名と同じ名前に指定することで、view.get()、view.append()、view.update()、
		view.prepend()から、値を渡すことができます。</p>
	<a class="anchor_super" id="capture1122535"></a><h3>
		動作確認
	</h3>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li><a
			href="./step5/step5.html"
			rel="nofollow">チュートリアル/step5</a></li>
	</ul>
	<a class="anchor_super" id="capture1222535"></a><h2>
		テンプレートの複数記述
	</h2>
	<p>外部ファイル・HTML直接定義どちらの場合も、複数のテンプレートを定義することができます。ただし、idは異なるものにしてください。</p>
	<pre name="code" class="xml">&lt;script type="text/ejs" id="list1"&gt;
&nbsp;&nbsp;&lt;div&gt;テスト1&lt;/div&gt;
&lt;/script&gt;
&lt;script type="text/ejs" id="list2"&gt;
&nbsp;&nbsp;&lt;span&gt;テスト2&lt;/span&gt;
&lt;/script&gt;</pre>
	<h3>
		同じテンプレートIDを持つテンプレートが読み込まれたときの挙動 <a class="anchor_super"
			id="capture1322535"></a>
	</h3>
	<p>
		idが重複した場合、後に読み込まれたものが優先します(上書きされる)。<br>上書きされたくない場合は、同一ファイルまたは別ファイル関係になく、idは一意のものを指定して下さい。
	</p>
	<p>ejsファイルの読み込み優先順は以下の通りです。</p>
	<ol class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>ejsファイル内では上から下に順番に読み込まれるので、ファイルの後ろに書かれた定義が優先</li>
		<li>コントローラの__templatesプロパティに複数のejsファイルを指定した場合、配列の後ろに指定したejsファイルが優先</li>
	</ol>
	<p>
		<span class="strong">idが重複した場合の挙動：</span>
	</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>hogehoge.ejs<pre name="code" class="xml">&lt;script type="text/ejs" id="list"&gt;
&nbsp;&nbsp;hello 1
&lt;/script&gt;
&lt;script type="text/ejs" id="list"&gt;
&nbsp;&nbsp;hello 2
&lt;/script&gt;</pre>
		</li>
		<li>test.js<pre name="code" class="js">var testController = {
&nbsp;&nbsp;&nbsp;__name: 'TestController',
&nbsp;&nbsp;&nbsp;__templates: 'hogehoge.ejs',
&nbsp;&nbsp;&nbsp;＿ready: function() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(this.view.get('list'));
&nbsp;&nbsp;&nbsp;}
}
&nbsp;
h5.core.controller('body', testController);</pre>
		</li>
		<li>test.html<pre name="code" class="xml">&lt;!doctype html&gt;
&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;&nbsp;&lt;meta charset="UTF-8"&gt;
&nbsp;&nbsp;&lt;script src="jquery.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&lt;script src="jquery.blockUI.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&lt;script src="ejs-1.0.h5mod.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&lt;script src="h5.js"&gt;&lt;/script&gt;
&nbsp;&nbsp;&lt;script src="test.js"&gt;&lt;/script&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body&gt;
&nbsp;&lt;/body&gt;
&lt;/html&gt;</pre>
		</li>
	</ul>
	<p>
		実行結果 ⇒ <span class="strong">hello 2</span>が表示されます。
	</p>
	<a class="anchor_super" id="capture1422535"></a><h2>
		ビュー操作に関する注意（idの一意性）
	</h2>
	<p>
		要素に設定する<span class="strong">idは画面内で一意</span>になるようにしてください。
	</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>リスト行のように複数回画面に登場する場合、idでなく<span class="strong">CSSクラスを割り当てる</span>ことを検討してください。
		</li>
		<li>Ajax等で動的に画面書き換えを行う場合には特に注意が必要です。</li>
		<li>同じidを持つ要素が複数ある場合、this.$find('#id') や
			document.getElementById('id')
			などで要素を取得すると、多くのブラウザはページ内で最初に定義されている要素を取得します。ただし、動作は処理系に依存するので必ずしも同じ動作になるとは限りません。</li>
	</ul>
	<div class="spacer">&nbsp;</div>
	<div class="spacer">&nbsp;</div>
	<div style="text-align: center">ビュー（テンプレート）とコントローラ（イベント処理）を分離するだけで、コードはずいぶんとすっきりします。</div>
	<div style="text-align: center">クライアントでの計算コードがあまりない場合は、この2つだけを使うのもアリでしょう。</div>
	<div style="text-align: center">次は、計算・通信処理を行う「ロジック」について説明します。</div>
	<div style="text-align: center">
		<span
			style="font-size: 18px; display: inline; line-height: 130%; text-indent: 0px">次のステップ⇒<a
			href="step06.html">チュートリアル06.ロジック</a></span>
	</div>
</div>
<!-- CONTENTS_MAIN_END -->