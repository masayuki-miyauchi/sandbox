<!-- CONTENTS_CSS_BEGIN -->
<link rel="stylesheet" href="css/article.css" type="text/css" />
<link type="text/css" rel="stylesheet"
	href="../lib/syntaxhighlighter/styles/SyntaxHighlighter.css"></link>
<!-- CONTENTS_CSS_END -->
<!-- CONTENTS_SCRIPT_BEGIN -->
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript">
	window.onload = function() {
		dp.SyntaxHighlighter.ClipboardSwf = '../lib/syntaxhighlighter/scripts/clipboard.swf';
		dp.SyntaxHighlighter.HighlightAll('code');
	}
</script>
<!-- CONTENTS_SCRIPT_END -->
<!-- CONTENTS_MAIN_BEGIN -->
<div id="contents">
	<ul class="menu tutorialIndex">
		<li><a href="step01.html" title="01.準備">01.準備</a></li>
		<li><a href="step02.html" title="02.MVC構造">02.MVC構造</a></li>
		<li><a href="step03.html" title="03.HelloWorld">03.HelloWorld</a></li>
		<li><a href="step04.html" title="04.コントローラ">04.コントローラ</a></li>
		<li><a href="step05.html" title="05.ビュー操作">05.ビュー操作</a></li>
		<li><a href="step06.html" title="06.ロジック">06.ロジック</a></li>
		<li><a href="step07.html" title="07.非同期処理">07.非同期処理</a></li>
		<li><a href="step08.html" title="08.テスト">08.テスト</a></li>
		<li><a href="step09.html" title="09.ドキュメント記述・生成(JSDoc)">09.ドキュメント記述・生成(JSDoc)</a></li>
		<li><a href="step10.html" title="10.サンプルアプリ（動画検索アプリの作成）">10.サンプルアプリ（動画検索アプリの作成）</a></li>
		<li><a href="step11.html" title="11.スマートフォン対応（jQueryMobileとの連携）">11.スマートフォン対応（jQueryMobileとの連携）</a></li>
		<li><a href="step12.html" title="12.HTML5APIの利用">12.HTML5APIの利用</a></li>
        <li><a href="step13.html" title="13.AOP(アスペクトの適用)">13.AOP(アスペクトの適用)</a></li>
	</ul>
	<h1 class="title">チュートリアル04.コントローラ</h1>
	<div class="contents contents2">
		<input type="hidden" name="contents2Level" value="0"><input
			type="hidden" name="contents2Filter" value=""><input
			type="hidden" name="contents2Count" value="-1"><input
			type="hidden" name="contents2CountLevel" value="0">
		<ul class="list1">
			<li><a href="#capture025484"> 概要 </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture125484">「コントローラ化」 </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture225484"> イベントハンドラ </a></li>
			<ul class="list2">
				<li><a href="#capture325484">基本構文 </a></li>
				<li><a href="#capture425484"> セレクタ </a></li>
				<li><a href="#capture525484"> イベントハンドラの引数(context) </a></li>
				<li><a href="#capture625484">特別なオブジェクト（window,
						document等）へのイベントハンドラの設定 </a></li>
				<li><a href="#capture725484">特別なイベント（バブリングしないイベント）へのイベントハンドラの設定
				</a></li>
				<li><a href="#capture825484">イベントハンドラの有効範囲 </a></li>
			</ul>
		</ul>
		<ul class="list1">
			<li><a href="#capture925484"> 内部使用コントローラ・ロジック・ビューテンプレートの宣言 </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture1025484"> コントローラ化のライフサイクル </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture1125484"> コントローラ化で利用可能になるメソッド </a></li>
		</ul>
	</div>
	<a class="anchor_super" id="capture025484"></a><h2>
		概要
	</h2>
	<p>
		<span class="strong">コントローラはユーザーとのインタラクション処理の中心</span>です。<br>ここでは
	</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>イベントハンドラの書き方</li>
		<li>テンプレートやロジック（後述）の宣言</li>
		<li>コントローラ化を行うときのライフサイクルイベント</li>
		<li>コントローラ内で使用できる便利メソッド</li>
	</ul>
	<p>について説明します。</p>
	<a class="anchor_super" id="capture125484"></a><h2>
		「コントローラ化」
	</h2>
	<p>
		コントローラについて詳細に説明する前に、「<span class="strong">コントローラ化</span>」という言葉について説明します。
	</p>
	<p>
		<a href="step03.html">チュートリアル03.HelloWorld</a>で示したように、hifiveでは<span
			class="strong">h5.core.controller()</span>メソッドを呼ぶことで<br>コントローラ定義オブジェクトを要素にバインドし実際に動作する状態にします。
	</p>
	<p>このとき内部では、コントローラを要素にバインドする前に</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>コントローラ定義オブジェクトに基づいてインスタンスを生成する</li>
		<li>デフォルトで使える便利な関数をインスタンスに追加する</li>
		<li>イベントハンドラを設定する</li>
	</ul>
	<p>
		などの処理を行っており、これを「<span class="strong">コントローラ化</span>」と呼んでいます。<br>
	</p>
	<p>
		今の段階では、コントローラ化は<br>「h5.core.controller()メソッドを呼んで動作可能状態にすること」<br>と覚えておけばよいでしょう。
	</p>
	<a class="anchor_super" id="capture225484"></a><h2>
		イベントハンドラ
	</h2>
	<p>
		コントローラが行う最も基本的な処理は<span class="strong">イベント処理（イベントハンドリング）</span>です。<br>hifiveでは、コントローラに特定の記法でプロパティを記述するとそれを自動的にイベントハンドラとして認識し、<br>ボタンがクリックされた、などのイベントが発生したときにその関数を呼び出すことができます。
	</p>
	<a class="anchor_super" id="capture325484"></a><h3>
		基本構文
	</h3>
	<p>
		<span class="strong">id</span>が<span class="strong">h5Btn</span>である要素が押されたとき（<span
			class="strong">click</span>イベントが発生する）に処理を行うコントローラを作成してみましょう。
	</p>
	<pre name="code" class="js">var h5BtnController = {
&nbsp;&nbsp;__name: 'H5BtnController',
&nbsp;
&nbsp;&nbsp;'#h5Btn click': function(context) {
&nbsp;&nbsp;&nbsp;&nbsp;alert('h5Btn要素がクリックされました。');
&nbsp;&nbsp;}
};</pre>
	<p>
		2行目の<span class="strong">__name</span>プロパティはコントローラの名前を表します。__nameプロパティは<span
			style="color: red; background-color:">必須プロパティ</span>で、記述がない場合エラーが発生します。<br>4行目がイベントハンドラの定義です。イベントハンドラは、
	</p>
	<pre name="code" class="js">'(セレクタ) (イベント名)': function(context) {
&nbsp;&nbsp;&nbsp;// 処理
&nbsp;}</pre>
	<p>
		の構文で記述します。<br>
	</p>
	<pre name="code" class="js">'(このセレクタ条件にマッチする要素で) (このイベントが起きたら)': (このfunctionを実行する)</pre>
	<p>
		と考えるとわかりやすいでしょう。<br>※セレクタについては次のセクションで説明します。<br> <span
			style="font-size: 10px; display: inline; line-height: 130%; text-indent: 0px">イベント名は、clickやsubmitといった既定のものだけではなく、独自のカスタムイベントも指定することができます。</span>
	</p>
	<p>
		コントローラの定義が終わったら、要素にバインドします。バインドするときは、<span class="strong">h5.core.controller()</span>メソッドを呼びだします。
	</p>
	<pre name="code" class="js">h5.core.controller('#container', hifiveBtnController);</pre>
	<p>このメソッドを呼ぶと、コントローラ定義オブジェクトのコントローラ化と指定した要素へのバインドが行われ、実際に動作するようになります。</p>
	<p>h5.core.controller()メソッドの詳細は、次の通りです。</p>
	<pre name="code" class="js">h5.core.controller(selector, controller, param);</pre>
	<dl class="list1" style="padding-left: 12px; margin-left: 12px">
		<dt>selector</dt>
		<dd>コントローラをバインドする要素を指定します。セレクタ、もしくは要素への参照のどちらかを指定します。</dd>
		<dt>controller</dt>
		<dd>コントローラ定義オブジェクトを指定します。</dd>
		<dt>param</dt>
		<dd>コントローラに渡す初期化パラメータを指定します。</dd>
		<dt>Returns</dt>
		<dd>コントローラオブジェクト</dd>
	</dl>
	<a class="anchor_super" id="capture425484"></a><h3>
		セレクタ
	</h3>
	<p>
		セレクタは<span class="strong">要素を絞り込むための条件式</span>です。<br>イベントハンドラを記述する場面では「<span
			class="strong">どの要素でイベントが起きたらハンドラを実行するか？</span>」を絞り込むために使用します。
	</p>
	<p>
		hifiveでは、CSSセレクタに準じた記法で条件式を記述します。<a id="notetext_1" href="#notefoot_1"
			class="note_super">*1</a>
	</p>
	<table class="style_table" cellspacing="1" border="0">
		<tbody>
			<tr>
				<td class="style_td" style="">代表的なセレクタ</td>
				<td class="style_td" style="">意味</td>
			</tr>
			<tr>
				<td class="style_td" style="">E</td>
				<td class="style_td" style="">要素を指定します。<br class="spacer">「div」は任意の&lt;div&gt;要素に一致します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">E F（EとFの間はスペース）</td>
				<td class="style_td" style="">E要素の子孫のF要素を指定します。<br
					class="spacer">「div a」は任意の&lt;div&gt;要素の子孫の&lt;a&gt;要素に一致します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">E[foo="xxx"]</td>
				<td class="style_td" style="">foo属性がxxxであるE要素を指定します。<br
					class="spacer">「input[type="button"]」は&lt;input
					type="button"&gt;に一致します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">#xxx</td>
				<td class="style_td" style="">id属性を指定します。「#myId」は「&lt;div
					id="myId"&gt;」や「&lt;ul id="myId"&gt;」に一致します。<br class="spacer">要素と組み合わせて指定する場合は「E#id」のように記述します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">.xxx</td>
				<td class="style_td" style="">CSSのクラスを指定します。「.myClass」は「&lt;div
					class="myClass"&gt;」等に一致します。<br class="spacer">要素と組み合わせて指定する場合は「E.class」のように記述します。
				</td>
			</tr>
		</tbody>
	</table>
	<p>
		<span style="color: red; background-color:">※注：「E」「F」は実際には要素名(div,
			aなど)が入ります</span>
	</p>
	<p>
		他のセレクタについては <a
			href="http://hp.vector.co.jp/authors/VA022006/css/selector.html"
			rel="nofollow">http://hp.vector.co.jp/authors/VA022006/css/selector.html</a>
		などを参照してください。
	</p>
	<p>例：</p>
	<dl class="list1" style="padding-left: 12px; margin-left: 12px">
		<dt>a</dt>
		<dd>任意のa要素に一致します。</dd>
		<dt>li.itemList</dt>
		<dd>itemListというCSSクラスが設定されているli要素に一致します。</dd>
		<dt>div#container a.externalLink</dt>
		<dd>idがcontainerであるdiv要素→の子孫である、externalLinkというCSSクラスが設定されているa要素
			に一致します。</dd>
		<dt>div#container ul li</dt>
		<dd>idがcontainerであるdiv要素→の子孫であるul要素→の子孫であるli要素 に一致します。</dd>
	</dl>
	<a class="anchor_super" id="capture525484"></a><h3>
		イベントハンドラの引数(context)
	</h3>
	<p>
		イベントハンドラの第1引数には、イベントコンテキストオブジェクトが渡されます。<br>仮引数名は任意の名前にすることができますが、特別な理由がない限り「<span
			class="strong">context</span>」で統一しておくのがよいでしょう。
	</p>
	<p>イベントコンテキストオブジェクトのプロパティは以下の通りです。</p>
	<dl class="list1" style="padding-left: 12px; margin-left: 12px">
		<dt>event</dt>
		<dd>jQueryEventオブジェクト</dd>
		<dt>controller</dt>
		<dd>コントローラの参照</dd>
		<dt>rootElement</dt>
		<dd>コントローラをバインドした要素</dd>
		<dt>evArg</dt>
		<dd>triggerメソッドを使用して渡したパラメータ</dd>
	</dl>
	<h3>
		特別なオブジェクト（window, document等）へのイベントハンドラの設定 <a class="anchor_super"
			id="capture625484"></a>
	</h3>
	<p>
		<span class="strong">window</span>や<span class="strong">document</span>,
		<span class="strong">navigator</span>など、イベントを発生させる特別なオブジェクトを指定したい場合もあると思います。<br>そのような場合は、セレクタの部分に、「<span
			class="strong">{}</span>（中かっこ）」で囲んでオブジェクトを記述します。<br>指定できるオブジェクトは以下の通りです。
	</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li><span class="strong">window</span>オブジェクト</li>
		<li><span class="strong">document</span>オブジェクト</li>
		<li><span class="strong">navigator</span>オブジェクト</li>
		<li><span class="strong">window.xxx</span>で表現されるオブジェクト</li>
		<li><span class="strong">document.xxx</span>で表現されるオブジェクト</li>
		<li><span class="strong">navigator.xxx</span>で表現されるオブジェクト</li>
	</ul>
	<p>
		<span class="strong">例：</span>
	</p>
	<pre name="code" class="js">'{document} click': function() {}</pre>
	<h3>
		特別なイベント（バブリングしないイベント）へのイベントハンドラの設定 <a class="anchor_super"
			id="capture725484"></a>
	</h3>
	<p>
		hifiveでは、イベントハンドラを紐付ける際に、（要素に直接addEventListenerするのではなく）<br>コントローラをバインドした要素にハンドラをaddし、<br>バブリングしてきた要素とセレクタをマッチングさせ処理を行うかどうかの判断をしています。<a
			id="notetext_2" href="#notefoot_2" class="note_super">*2</a><br>これは、ハンドラの管理を容易にし、パフォーマンスを最適化するために行われています。<br>
		<span
			style="font-size: 10px; display: inline; line-height: 130%; text-indent: 0px">イベントのバブリングについては「イベント
			バブリング」などのキーワードで検索してください。</span>
	</p>
	<p>
		しかし、<span class="strong">scroll</span>や<span class="strong">resize</span>など一部のイベントはバブリングしません。<br>そこでhifiveでは、バブリングしないイベントのためにハンドラを要素に直接バインドする手段を用意しています。<br>やり方は簡単です。<span
			class="strong">鍵括弧で囲む</span>だけです。
	</p>
	<pre name="code" class="js">'{window} [scroll]': function(context) {}</pre>
	<p>こうすると、windowオブジェクトでscrollイベントが発生した場合にハンドラを動作させることができます。</p>
	<a class="anchor_super" id="capture825484"></a><h3>
		イベントハンドラの有効範囲
	</h3>
	<p>
		コントローラで定義したイベントハンドラは、原則として<br>「そのコントローラがバインドした要素<span
			class="strong">の子要素</span>でイベント発生した場合」にのみ動作します。<br>
	</p>
	<p>
		これにより、コントローラの責任範囲が明確になると同時に、たとえばセレクタの条件が広い場合に<br>コントローラの範囲外の要素で発生したイベントで不用意にハンドラが動作することを防ぐことができます。
	</p>
	<p>従って、たとえば</p>
	<p>
		<span class="strong">HTML：</span>
	</p>
	<pre name="code" class="xml">&lt;body&gt;
&nbsp;&nbsp;&lt;div id="container"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="button" name="click1" value="click1" /&gt;
&nbsp;&nbsp;&lt;/div&gt;
&nbsp;&nbsp;&lt;div&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="button" name="click2" value="click2" /&gt;
&nbsp;&nbsp;&lt;/div&gt;
&lt;/body&gt;</pre>
	<p>
		<span class="strong">JavaScript：</span>
	</p>
	<pre name="code" class="js">var selectorController = {
&nbsp;&nbsp;__name: 'SelectorController',
&nbsp;
&nbsp;&nbsp;'input[type=button] click': function(context) {
&nbsp;&nbsp;&nbsp;&nbsp;alert('clicked!');
&nbsp;&nbsp;}
};
h5.core.controller('#container', selectorController);</pre>
	<p>
		という例の場合、selectorControllerは&lt;div id="container"&gt;の要素にバインドされているため、<br>
		<span class="strong">click1</span>ボタンを押下すると（click1は&lt;div
		id="container"&gt;の子要素なので）メッセージが表示されますが<br> <span class="strong">click2</span>ボタンを押下しても何も起きません。
	</p>
	<p>
		ただし、例外的に、コントローラの外側の要素を対象にしたい場合もあるでしょう。<br>画面に存在するすべての要素（コントローラの外側、もしくは横の要素を含む）をセレクタの対象としたい場合は<br>
		<span class="strong">セレクタを中括弧で囲めばOKです</span>。
	</p>
	<p>上の例の場合、コントローラの定義を</p>
	<pre name="code" class="js">var selectorController = {
&nbsp;&nbsp;__name: 'SelectorController',
&nbsp;
&nbsp;&nbsp;'{input[type=button]} click': function(context) {&nbsp; //セレクタを{}で囲んだ
&nbsp;&nbsp;&nbsp;&nbsp;alert('clicked!');
&nbsp;&nbsp;}
};</pre>
	<p>
		とすると、どちらのボタンを押下してもメッセージが表示されるようになります。<br>
	</p>
	<p>
		また、セレクタでは、“コントローラをバインドしている要素自身”を指定することはできません。<br>バインドしている要素自体で発生するイベントに対してハンドラを設定したい場合は、<br>セレクタの場所に「<span
			class="strong">{rootElement}</span>」と記述します。
	</p>
	<pre name="code" class="js">var selectorController = {
&nbsp;&nbsp;__name: 'SelectorController',
&nbsp;
&nbsp;&nbsp;'{rootElement} click': function(context) {&nbsp; //{rootElement}と書くと、コントローラをバインドした要素自身を指す
&nbsp;&nbsp;&nbsp;&nbsp;alert('clicked!');
&nbsp;&nbsp;}
};</pre>
	 <a class="anchor_super" id="capture925484"></a><h2>
		内部使用コントローラ・ロジック・ビューテンプレートの宣言
	</h2>
	<p>
		コントローラには、内部で使用する別のコントローラ・ロジック・ビューテンプレートを宣言することができます。<br>※テンプレートとロジックの詳細は後のステップで説明します。
	</p>
	<pre name="code" class="js">var sampleController = {
&nbsp;&nbsp;__name: 'SampleController',
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;__templates: ['view/template1.ejs', 'view/template2.ejs'],
&nbsp;
&nbsp;&nbsp;sampleLogic: new SampleLogic(),
&nbsp;
&nbsp;&nbsp;internalController: internalController
};</pre>
	<p>これらの宣言はコントローラ化の際フレームワークによって読み込まれ、それぞれ以下のように処理されます。</p>
	<dl class="list1" style="padding-left: 12px; margin-left: 12px">
		<dt>__templates</dt>
		<dd>
			このコントローラで使用するビューテンプレートへのパス(URL)を指定します。<br class="spacer">要素にコントローラをバインドする<span
				class="strong">前</span>に指定したテンプレートをロードし使用できるようにします。
		</dd>
		<dt>xxxLogic</dt>
		<dd>
			このコントローラで使用するロジックを宣言します。サフィックスを必ず<span class="strong">Logic</span>にする必要があります。<br
				class="spacer">指定されたロジックはフレームワークによって自動的に"ロジック化"（詳細は<a
				href="step06.html">チュートリアル06.ロジック</a>で説明）され、hifiveのロジックオブジェクトになります。
		</dd>
		<dt>xxxController</dt>
		<dd>
			このコントローラで使用する別コントローラを宣言します。サフィックスを必ず<span class="strong">Controller</span>にする必要があります。<br
				class="spacer">指定されたコントローラはフレームワークによって自動的にコントローラ化され、hifiveのコントローラオブジェクトになります。
		</dd>
	</dl>
	<a class="anchor_super" id="capture1025484"></a><h2>
		コントローラ化のライフサイクル
	</h2>
	<p>
		コントローラが要素にバインドされ動作する状態になるまでには、いくつかの段階（ライフサイクル）があります。<br>コントローラ化のライフサイクルは以下のようになっています。
	</p>
	<div class="img_margin" style="text-align: left">
		<img src="./images/lifecycle1.jpg" alt="lifecycle1.jpg">
	</div>
	<p>特定のライフサイクル段階で処理を行いたい場合、特定のキー名で関数をセットしておくと、そのタイミングに達したときに呼び出されます。</p>
	<pre name="code" class="js">var lifecycleSampleController = {
&nbsp;&nbsp;__name: 'LifecycleSampleController',
&nbsp;
&nbsp;&nbsp;__construct: function() {
&nbsp;&nbsp;&nbsp;&nbsp;alert('construct');
&nbsp;&nbsp;},
&nbsp;
&nbsp;&nbsp;__init: function(context) {
&nbsp;&nbsp;&nbsp;&nbsp;alert('init');
&nbsp;&nbsp;},
&nbsp;
&nbsp;&nbsp;__ready: function(context) {
&nbsp;&nbsp;&nbsp;&nbsp;alert('ready');
&nbsp;&nbsp;}
};</pre>
	<dl class="list1" style="padding-left: 12px; margin-left: 12px">
		<dt>__construct</dt>
		<dd>コントローラ化が終わったタイミングで実行されます。リソース（ビューテンプレート）の読み込みは終わっていません。</dd>
		<dt>__init</dt>
		<dd>
			コントローラ化と動作に必要なリソースの読み込みとViewへのバインドが終わったタイミングで実行されます。まだイベントハンドラはバインドされていません。</dd>
		<dt>__ready</dt>
		<dd>コントローラ化と動作に必要なリソースの読み込み、Viewとイベントハンドラのバインドが終わったタイミングで実行されます。</dd>
	</dl>
	<p>
		ただし、「コントローラが動作可能状態になったら何かしたい」場合、ほとんどのケースでは<span class="strong">__ready</span>イベントを使用すればよいでしょう。<br>
	</p>
	<p>
		<a class="anchor" id="cmethod"></a>
	</p>
	<a class="anchor_super" id="capture1125484"></a><h2>
		コントローラ化で利用可能になるメソッド
	</h2>
	<p>
		定義オブジェクトをコントローラ化すると、以下のメソッドが使えるようになります。<br>要素の選択・テンプレートの使用・UIブロックなどが簡単に行えます。
	</p>
	<table class="style_table" cellspacing="1" border="0">
		<thead>
			<tr>
				<td class="style_td" style="">メソッド</td>
				<td class="style_td" style="">説明</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="style_td" style="">$find(selector)</td>
				<td class="style_td" style="">コントローラ内で指定されたセレクタにマッチする要素を選択します。<br
					class="spacer">selector - セレクタを指定します。<br class="spacer">戻り値
					- jQueryオブジェクト
				</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">getView(templateId,
					data)</td>
				<td class="style_td" style="background-color: white;">指定されたテンプレートにパラメータをバインドした文字列を返します。<br
					class="spacer">templateId - テンプレートのIDを指定します。<br class="spacer">data
					- テンプレートに渡すパラメータを指定します。<br class="spacer">戻り値 -
					テンプレートにパラメータをバインドした文字列
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">updateView(element, templateId,
					data)</td>
				<td class="style_td" style="">指定されたテンプレートにパラメータをバインドした文字列を作成し、対象の要素を書き換えます。<br
					class="spacer">element - 書き換える要素自身、もしくはセレクタを指定します。<br
					class="spacer">templateId - テンプレートのIDを指定します。<br class="spacer">data
					- テンプレートに渡すパラメータを指定します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">appendView(element,
					templateId, data)</td>
				<td class="style_td" style="background-color: white;">指定されたテンプレートにパラメータをバインドした文字列を作成し、対象の要素に追加します。<br
					class="spacer">element - 書き換える要素自身、もしくはセレクタを指定します。<br
					class="spacer">templateId - テンプレートのIDを指定します。<br class="spacer">data
					- テンプレートに渡すパラメータを指定します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">prependView(element, templateId,
					data)</td>
				<td class="style_td" style="">指定されたテンプレートにパラメータをバインドした文字列を作成し、対象の要素の一番最初に追加します。<br
					class="spacer">element - 書き換える要素自身、もしくはセレクタを指定します。<br
					class="spacer">templateId - テンプレートのIDを指定します。<br class="spacer">data
					- テンプレートに渡すパラメータを指定します。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">deferred()</td>
				<td class="style_td" style="background-color: white;">Deferredオブジェクトを返します。</td>
			</tr>
			<tr>
				<td class="style_td" style="">trigger(eventName, parameter)</td>
				<td class="style_td" style="">イベントを発火させます。<br class="spacer">eventName
					- イベント名を指定します。<br class="spacer">parameter -
					パラメータを指定します。渡せるパラメータは1つのみです。複数のパラメータを渡したい場合、オブジェクトのプロパティとして設定してください。
				</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">own(func)</td>
				<td class="style_td" style="background-color: white;">他のライブラリのコールバックにコントローラのメソッドを指定したい時に使用します。<br
					class="spacer">指定されたメソッドに対して、コンテキスト(this)をコントローラに変更したメソッドを返します。<br
					class="spacer">func - コントローラのメソッドを指定します。<br class="spacer">戻り値
					- コンテキスト(this)をコントローラに変更したメソッド
				</td>
			</tr>
			<tr>
				<td class="style_td" style="">ownWithOrg(func)</td>
				<td class="style_td" style="">他のライブラリのコールバックにコントローラのメソッドを指定したい時に使用します。<br
					class="spacer">指定されたメソッドに対して、コンテキスト(this)をコントローラに変更し、元々のthisを第1引数に加えたメソッドを返します。<br
					class="spacer">func - コントローラのメソッドを指定します。<br class="spacer">戻り値
					- コンテキスト(this)をコントローラに変更し、元々のthisを第1引数に加えたメソッド
				</td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">unbind()</td>
				<td class="style_td" style="background-color: white;">コントローラの要素へのバインドを解除します。</td>
			</tr>
			<tr>
				<td class="style_td" style="">indicator(options)</td>
				<td class="style_td" style="">インジケータや画面ブロックを表示するために必要な項目を設定します。<br
					class="spacer"> このメソッドを実行しただけではインジケータや画面ブロックは表示されません。 <br
					class="spacer">
					このメソッドの戻り値であるオブジェクトが持つshowメソッドを実行することで、インジケータや画面ブロックの表示を実行します。 <br
					class="spacer"> options.target -
					対象となる要素(オブジェクトまたはセレクタで指定)未指定の場合はコントローラをバインドしたオブジェクト <br
					class="spacer"> options.message - メッセージ。未指定の場合は何も表示しない。<br
					class="spacer"> optons.percent -
					進捗を[0～100]の値で指定する。未指定の場合は何も表示しない。<br class="spacer">
					options.block - 操作できないよう画面をブロックするか(デフォルト:する[true]) <br
					class="spacer"> 戻り値 - Indicatorオブジェクト <br class="spacer">
					<br class="spacer">サンプル - <a
					href="../sandbox/indicator/index.html" rel="nofollow">インジケータのサンプル</a>

					<br class="spacer">JSDoc - <a
					href="../doc/Controller.html#indicator" rel="nofollow">Controller#indicator</a></td>
			</tr>
			<tr>
				<td class="style_td" style="background-color: white;">enableListeners()</td>
				<td class="style_td" style="background-color: white;">コントローラの全てのイベントハンドラが動作するようにします。</td>
			</tr>
			<tr>
				<td class="style_td" style="">disableListeners()</td>
				<td class="style_td" style="">コントローラの全てのイベントハンドラが動作しないようにします。</td>
			</tr>
		</tbody>
	</table>
	<div class="spacer">&nbsp;</div>
	<div class="spacer">&nbsp;</div>
	<div style="text-align: center">いきなりボリュームが多くてごめんなさい。ですが、コントローラの役割を理解し</div>
	<div style="text-align: center">定義に従って書くことで自然と、スコープが明確でいつ何が起きるのかわかりやすいコードになっていくはずです。</div>
	<div style="text-align: center">次は、画面（ビュー）の操作について説明します。</div>
	<div style="text-align: center">
		<span
			style="font-size: 18px; display: inline; line-height: 130%; text-indent: 0px">次のステップ⇒<a
			href="step05.html">チュートリアル05.ビュー操作</a></span>
	</div>

	<div id="note">
		<hr class="note_hr">
		<a id="notefoot_1" href="#notetext_1" class="note_super">*1</a><span
			class="small">内部的には、jQueryのセレクタAPIを使用して要素を選択しています。したがって、jQueryを直接使用する場合と同じようにセレクタを記述することができます。</span><br>
		<a id="notefoot_2" href="#notetext_2" class="note_super">*2</a><span
			class="small">内部的にはjQuery.live, jQuery.delegateを使用しています。</span><br>
	</div>
</div>
<!-- CONTENTS_MAIN_END -->