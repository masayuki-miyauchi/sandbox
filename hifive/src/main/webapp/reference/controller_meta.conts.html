<!-- CONTENTS_CSS_BEGIN -->
<link rel="stylesheet" href="css/article.css" type="text/css" />
<link type="text/css" rel="stylesheet"
	href="../lib/syntaxhighlighter/styles/SyntaxHighlighter.css"></link>
<!-- CONTENTS_CSS_END -->
<!-- CONTENTS_SCRIPT_BEGIN -->
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript"
	src="../lib/syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript">
	window.onload = function() {
		dp.SyntaxHighlighter.ClipboardSwf = '../lib/syntaxhighlighter/scripts/clipboard.swf';
		dp.SyntaxHighlighter.HighlightAll('code');
	}
</script>
<!-- CONTENTS_SCRIPT_END -->
<!-- CONTENTS_MAIN_BEGIN -->
<div id="contents">
	<h1 class="title">コントローラのメタ定義</h1>
	<div class="contents contents2">
		<input type="hidden" name="contents2Level" value="0"><input
			type="hidden" name="contents2Filter" value=""><input
			type="hidden" name="contents2Count" value="-1"><input
			type="hidden" name="contents2CountLevel" value="0">
		<ul class="list1">
			<li><a href="#capture029824"> 概要 </a></li>
		</ul>
		<ul class="list1">
			<li><a href="#capture129824"> __metaで設定できるプロパティ </a></li>
			<ul class="list2">
				<li><a href="#capture229824"> rootElement </a></li>
				<ul class="list3">
					<li><a href="#capture329824"> 文字列 </a></li>
					<li><a href="#capture429824"> DOM要素 </a></li>
					<li><a href="#capture529824"> 親、子、孫コントローラ </a></li>
				</ul>
			</ul>
			<ul class="list2">
				<li><a href="#capture629824"> useHandlers </a></li>
			</ul>
		</ul>
	</div>
	<a class="anchor_super" id="capture029824"></a><h2>
		概要
	</h2>
	<p>
		コントローラ(親コントローラ)は、コントローラ(子コントローラ)を持つことができます。<br>子コントローラには__metaプロパティによるメタ定義が可能です。
	</p>
	<p>__metaプロパティは以下のようにして定義します。</p>
	<pre name="code" class="js">var parentController = {
&nbsp;&nbsp;__name: 'ParentController',
&nbsp;
&nbsp;&nbsp;childController: childController,
&nbsp;
&nbsp;&nbsp;__meta: {
&nbsp;&nbsp;&nbsp;&nbsp;childController: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootElement: '#child',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useHandlers: true
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}
};</pre>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>7行目から10行目がChildControllerのメタ定義となっています。<br>メタ定義は<pre
				name="code" class="js">__meta: {
&nbsp;&nbsp;子コントローラのプロパティ名: {
&nbsp;&nbsp;&nbsp;&nbsp;プロパティ1： xxx, プロパティ2: xxx, ...
&nbsp;&nbsp;}
}</pre> と設定します。<br>上記の場合、子コントローラは<span class="strong">childController</span>という名前で親コントローラのプロパティとして宣言されているので、<br>__metaの中でも同じように<span
			class="strong">childController</span>という名前で定義を行います。
		</li>
	</ul>
	<a class="anchor_super" id="capture129824"></a><h2>
		__metaで設定できるプロパティ
	</h2>
	<a class="anchor_super" id="capture229824"></a><h3>
		rootElement
	</h3>
	<p>
		子コントローラは基本的に親コントローラと同じ<span class="strong">rootElement</span>を持ちます。<br>しかし、機能を分割する手段としてコントローラを分ける場合やコンポーネントとしてコントローラを作成する場合、<br>親コントローラとは異なるrootElementを持ちたくなることがあります。
	</p>
	<p>
		親とは異なるrootElementを持ちたい場合、以下のように__metaプロパティの中の<span class="strong">rootElement</span>というプロパティで設定を行います。
	</p>
	<pre name="code" class="js">var parentController = {
&nbsp;&nbsp;__name: 'ParentController',
&nbsp;
&nbsp;&nbsp;childController: childController,
&nbsp;
&nbsp;&nbsp;__meta: {
&nbsp;&nbsp;&nbsp;&nbsp;childController: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootElement: '#child'
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}
};</pre>
	<p>rootElementには文字列とDOM要素が設定できます。</p>
	<a class="anchor_super" id="capture329824"></a><h4>
		文字列
	</h4>
	<p>
		rootElementに文字列を設定した場合、hifiveは値をセレクタとみなし、<br>
		<span class="strong">親コントローラをバインドした要素の中からセレクタにマッチする要素</span>を選択します。<br>要素が見つからなかったり、複数ある場合はエラーとなります。
	</p>
	<p>
		親コントローラをした要素の中からではなく、グローバルに選択したい場合は、<br>イベントハンドラと同じように<span
			class="strong">{}</span>でセレクタを囲みます。<br>この場合も要素がない、もしくは複数ある場合はエラーとなります。
	</p>
	<a class="anchor_super" id="capture429824"></a><h4>
		DOM要素
	</h4>
	<p>rootElementにDOM要素を設定した場合、設定した値がそのままrootElementとなります。</p>
	<a class="anchor_super" id="capture529824"></a><h4>
		親、子、孫コントローラ
	</h4>
	<p>__metaでrootElementが設定されない場合、子コントローラのrootElementは自身の親コントローラのrootElementになります。</p>
	<pre name="code" class="js">var childController = {
&nbsp;&nbsp;__name: 'ChildController',
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;grandChildController: grandChildController
};
&nbsp;
var parentController = {
&nbsp;&nbsp;__name: 'ParentController',
&nbsp;
&nbsp;&nbsp;childController: childController,
&nbsp;
&nbsp;&nbsp;__meta: {
&nbsp;&nbsp;&nbsp;&nbsp;childController: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootElement: '#child'
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}
};</pre>
	<p>
		上記のようなコントローラがある場合にParentControllerをA要素にバインドしたとします。<br>この時
		rootElementは、
	</p>
	<ul class="list1" style="padding-left: 12px; margin-left: 12px">
		<li>ParentController: A要素</li>
		<li>ChildController: A要素内のidが"child"である要素</li>
		<li>GrandChildConttroller:
			A要素内のidが"child"である要素(1つ上の親であるChildControllerと同じ)</li>
	</ul>
	<p>になります。</p>
	<a class="anchor_super" id="capture629824"></a><h3>
		useHandlers
	</h3>
	<p>
		__metaの<span class="strong">useHandlers</span>プロパティは子コントローラのイベントハンドラを使用するかどうかを定義します。<br>デフォルトは<span
			class="strong">false</span>です。<br>useHandlersプロパティがtrueの場合、子コントローラは自身のrootElementに対してイベントハンドラをバインドします。
	</p>
	<pre name="code" class="js">var childController = {
&nbsp;&nbsp;__name: 'ChildController',
&nbsp;
&nbsp;&nbsp;'input[type=button] click': function(context) {
&nbsp;&nbsp;&nbsp;&nbsp;this.log.info('button click');
&nbsp;&nbsp;}
};
var parentController = {
&nbsp;&nbsp;__name: 'ParentController',
&nbsp;
&nbsp;&nbsp;childController: childController,
&nbsp;
&nbsp;&nbsp;__meta: {
&nbsp;&nbsp;&nbsp;&nbsp;childController: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useHandlers: true
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}
};</pre>
	<p>
		ParentControllerをA要素にバインドしたとします。<br>useHandlersプロパティがtrueなのでChildControllerのイベントハンドラはバインドされます。<br>
	</p>
	<p>
		A要素内の"input[type=button]"というセレクタにマッチする要素が"click"されるとハンドラが動作し、<br>コンソールに"button
		click"というメッセージが表示されます。<br>
	</p>
	<p>
		useHandlsersプロパティを記述しない、もしくはfalseにすると、<br>A要素内の"input[type=button]"というセレクタにマッチする要素を"click"しても<br>イベントハンドラがバインドされていないため何も起きません。
	</p>
</div>
<!-- CONTENTS_MAIN_END -->